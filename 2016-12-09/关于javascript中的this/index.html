<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"><meta name=keywords content=blog,html,css,javascript,react,vue,nodejs><meta name=description content="zoubingwu 个人博客, zoubingwu's blog"><link href=/assets/images/favicon.ico rel=bookmark type=image/x-icon><link href=/assets/images/favicon.ico rel=icon type=image/x-icon><link href=/assets/images/favicon.ico rel="shortcut icon" type=image/x-icon><link rel=stylesheet href=/assets/css/main.css type=text/css><link rel=preload href=/assets/fonts/googlefont.css as=style><link rel=preload href=https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css as=style><link rel=stylesheet href=/assets/fonts/googlefont.css as=style><link rel=stylesheet href=https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css as=style><link rel=alternate type=application/rss+xml title="RSS Feed for zoubingwu's blog" href=/feed.xml><title>关于Javascript中的this | https://zoubingwu.com</title><meta property=og:title content="关于Javascript中的this | https://zoubingwu.com"><meta property=og:locale content=en_US><meta name=description content=""><meta property=og:description content=""><link rel=canonical href=https://zoubingwu.com/2016-12-09/关于javascript中的this><meta property=og:url content=https://zoubingwu.com/2016-12-09/关于javascript中的this><meta property=og:site_name content="zoubingwu's blog"><meta property=og:type content=article><meta property=article:published_time content=2016-12-09T20:27:18.000Z><meta name=twitter:card content=summary><meta property=twitter:title content="关于Javascript中的this | https://zoubingwu.com"><script>(function (i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; (i[r] = i[r]
  || function () { (i[r].q = i[r].q || []).push(arguments); }), (i[r].l = 1 *
  new Date()); (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
  a.async = 1; a.src = g; m.parentNode.insertBefore(a, m); })( window, document,
  'script', 'https://www.google-analytics.com/analytics.js', 'ga' );
  ga('create', 'UA-100363260-1', 'auto'); ga('send', 'pageview');</script></head><body><div class=content-container><div class=post><div class=post-title>关于Javascript中的this</div><span class=post-date><time>9 Dec 2016</time></span><div class=post-tag><ul><li><a><span><i class="fa fa-paperclip" aria-hidden=true></i>javascript</span></a></li></ul></div><ul><li><h3 id=全局环境>全局环境</h3></li></ul><p>浏览器中:</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #24292E">console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #6A737D">// Window {speechSynthesis: SpeechSynthesis, caches: CacheStorage, localStorage: Storage, sessionStorage: Storage, webkitStorageInfo: DeprecatedStorageInfo…}</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #C9D1D9">console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #8B949E">// Window {speechSynthesis: SpeechSynthesis, caches: CacheStorage, localStorage: Storage, sessionStorage: Storage, webkitStorageInfo: DeprecatedStorageInfo…}</span></span></code></pre></div>
</code></pre><p>nodejs:</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #24292E">console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #6A737D">// global</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #C9D1D9">console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #8B949E">// global</span></span></code></pre></div>
</code></pre><p>全局环境下this总是指向全局对象，在浏览器环境中即window，node中即global</p><ul><li><h3 id=函数中执行>函数中执行</h3></li></ul><p>函数中直接使用：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">test</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">  console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">};</span></span>
<span class=line><span style="color: #6F42C1">test</span><span style="color: #24292E">();</span></span>
<span class=line><span style="color: #6A737D">// Window {speechSynthesis: SpeechSynthesis, caches: CacheStorage, localStorage: Storage, sessionStorage: Storage, webkitStorageInfo: DeprecatedStorageInfo…}</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">test</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">  console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">};</span></span>
<span class=line><span style="color: #D2A8FF">test</span><span style="color: #C9D1D9">();</span></span>
<span class=line><span style="color: #8B949E">// Window {speechSynthesis: SpeechSynthesis, caches: CacheStorage, localStorage: Storage, sessionStorage: Storage, webkitStorageInfo: DeprecatedStorageInfo…}</span></span></code></pre></div>
</code></pre><p>严格模式下：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #032F62">&#39;use strict&#39;</span><span style="color: #24292E">;</span></span>
<span class=line><span style="color: #24292E">(</span><span style="color: #D73A49">function</span><span style="color: #24292E"> () {</span></span>
<span class=line><span style="color: #24292E">  console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">})();</span></span>
<span class=line><span style="color: #6A737D">// undefined</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #A5D6FF">&#39;use strict&#39;</span><span style="color: #C9D1D9">;</span></span>
<span class=line><span style="color: #C9D1D9">(</span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> () {</span></span>
<span class=line><span style="color: #C9D1D9">  console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">})();</span></span>
<span class=line><span style="color: #8B949E">// undefined</span></span></code></pre></div>
</code></pre><p>函数中直接使用时也是指向全局对象，但是在严格模式下为了消除一些不严谨的行为，使this指向了undefined</p><ul><li><h3 id=对象的方法>对象的方法</h3></li></ul><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> obj </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&#39;john&#39;</span><span style="color: #24292E">,</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #6F42C1">foo</span><span style="color: #24292E">: </span><span style="color: #D73A49">function</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">    console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">.name);</span></span>
<span class=line><span style="color: #24292E">  }</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line><span style="color: #24292E">obj.</span><span style="color: #6F42C1">foo</span><span style="color: #24292E">();</span></span>
<span class=line><span style="color: #6A737D">// &#39;john&#39;</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> obj </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&#39;john&#39;</span><span style="color: #C9D1D9">,</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">foo</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.name);</span></span>
<span class=line><span style="color: #C9D1D9">  }</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line><span style="color: #C9D1D9">obj.</span><span style="color: #D2A8FF">foo</span><span style="color: #C9D1D9">();</span></span>
<span class=line><span style="color: #8B949E">// &#39;john&#39;</span></span></code></pre></div>
</code></pre><p>此时，this指向了这个对象本身。</p><p>但是，如果把这个方法赋值给一个变量，再直接调用这个变量，这时候就和这个对象没关系了，因为这个变量保存的是函数的引用，全局内调用时就被当成了普通的函数直接调用：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> obj </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&#39;john&#39;</span><span style="color: #24292E">,</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #6F42C1">foo</span><span style="color: #24292E">: </span><span style="color: #D73A49">function</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">    console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">  }</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> test </span><span style="color: #D73A49">=</span><span style="color: #24292E"> obj.foo;</span></span>
<span class=line><span style="color: #6F42C1">test</span><span style="color: #24292E">();</span></span>
<span class=line><span style="color: #6A737D">// Window</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> obj </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&#39;john&#39;</span><span style="color: #C9D1D9">,</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">foo</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">  }</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> test </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> obj.foo;</span></span>
<span class=line><span style="color: #D2A8FF">test</span><span style="color: #C9D1D9">();</span></span>
<span class=line><span style="color: #8B949E">// Window</span></span></code></pre></div>
</code></pre><p>注意：this不像变量，是无法向下传递的：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> obj </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&#39;john&#39;</span><span style="color: #24292E">,</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #6F42C1">foo</span><span style="color: #24292E">: </span><span style="color: #D73A49">function</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">    (</span><span style="color: #D73A49">function</span><span style="color: #24292E">(){</span></span>
<span class=line><span style="color: #24292E">      console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">    })()</span></span>
<span class=line><span style="color: #24292E">  }</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line><span style="color: #24292E">obj.</span><span style="color: #6F42C1">foo</span><span style="color: #24292E">();</span></span>
<span class=line><span style="color: #6A737D">// Window</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> obj </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&#39;john&#39;</span><span style="color: #C9D1D9">,</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">foo</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">    (</span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9">(){</span></span>
<span class=line><span style="color: #C9D1D9">      console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">    })()</span></span>
<span class=line><span style="color: #C9D1D9">  }</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line><span style="color: #C9D1D9">obj.</span><span style="color: #D2A8FF">foo</span><span style="color: #C9D1D9">();</span></span>
<span class=line><span style="color: #8B949E">// Window</span></span></code></pre></div>
</code></pre><p>同样在setTimtout中：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> obj </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&#39;qiutc&#39;</span><span style="color: #24292E">,</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #6F42C1">foo</span><span style="color: #24292E">: </span><span style="color: #D73A49">function</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">    console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">  },</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #6F42C1">foo2</span><span style="color: #24292E">: </span><span style="color: #D73A49">function</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">    console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">    </span><span style="color: #005CC5">setTimeout</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">.foo, </span><span style="color: #005CC5">1000</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">  }</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line></span>
<span class=line><span style="color: #24292E">obj.</span><span style="color: #6F42C1">foo2</span><span style="color: #24292E">();</span></span>
<span class=line><span style="color: #6A737D">// obj, window</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> obj </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&#39;qiutc&#39;</span><span style="color: #C9D1D9">,</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">foo</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">  },</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">foo2</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">setTimeout</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.foo, </span><span style="color: #79C0FF">1000</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">  }</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line></span>
<span class=line><span style="color: #C9D1D9">obj.</span><span style="color: #D2A8FF">foo2</span><span style="color: #C9D1D9">();</span></span>
<span class=line><span style="color: #8B949E">// obj, window</span></span></code></pre></div>
</code></pre><p>第一次打印obj，this指向的是对象本身。</p><p>第二次却指向了window，因为settimeout也是一个函数，而this是不会向下传递的。为了解决这个问题，我们可以手动指定一个变量来保存this，根据函数作用域链，内部的函数依然可以使用这个变量：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> obj </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&#39;john&#39;</span><span style="color: #24292E">,</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #6F42C1">foo</span><span style="color: #24292E">: </span><span style="color: #D73A49">function</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">    console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">  },</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #6F42C1">foo2</span><span style="color: #24292E">: </span><span style="color: #D73A49">function</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">    console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">    </span><span style="color: #D73A49">var</span><span style="color: #24292E"> that </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #005CC5">this</span><span style="color: #24292E">;</span></span>
<span class=line><span style="color: #24292E">    </span><span style="color: #005CC5">setTimeout</span><span style="color: #24292E">(</span><span style="color: #D73A49">function</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">      console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);  </span><span style="color: #6A737D">// Window</span></span>
<span class=line><span style="color: #24292E">      console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(that);  </span><span style="color: #6A737D">// Object {name: &quot;john&quot;}</span></span>
<span class=line><span style="color: #24292E">    }, </span><span style="color: #005CC5">1000</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">  }</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line><span style="color: #24292E">obj.</span><span style="color: #6F42C1">foo2</span><span style="color: #24292E">();</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> obj </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&#39;john&#39;</span><span style="color: #C9D1D9">,</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">foo</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">  },</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">foo2</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">    </span><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> that </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">;</span></span>
<span class=line><span style="color: #C9D1D9">    </span><span style="color: #79C0FF">setTimeout</span><span style="color: #C9D1D9">(</span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">      console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);  </span><span style="color: #8B949E">// Window</span></span>
<span class=line><span style="color: #C9D1D9">      console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(that);  </span><span style="color: #8B949E">// Object {name: &quot;john&quot;}</span></span>
<span class=line><span style="color: #C9D1D9">    }, </span><span style="color: #79C0FF">1000</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">  }</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line><span style="color: #C9D1D9">obj.</span><span style="color: #D2A8FF">foo2</span><span style="color: #C9D1D9">();</span></span></code></pre></div>
</code></pre><p>严格模式下又有不同：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #032F62">&#39;use strict&#39;</span><span style="color: #24292E">;</span></span>
<span class=line><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">foo</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">  console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line><span style="color: #005CC5">setTimeout</span><span style="color: #24292E">(foo, </span><span style="color: #005CC5">1</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #6A737D">// window</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #A5D6FF">&#39;use strict&#39;</span><span style="color: #C9D1D9">;</span></span>
<span class=line><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">foo</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">  console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line><span style="color: #79C0FF">setTimeout</span><span style="color: #C9D1D9">(foo, </span><span style="color: #79C0FF">1</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #8B949E">// window</span></span></code></pre></div>
</code></pre><p>我们会发现这里并不是undefined，因为严格模式中，如果函数没有指定了的this，那么它会自动注入一个全局的上下文。当然如果之前指定了的话，就不会有这个隐式的操作了。</p><ul><li><h3 id=构造函数>构造函数</h3></li></ul><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Person</span><span style="color: #24292E">(</span><span style="color: #E36209">name</span><span style="color: #24292E">) {</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.name </span><span style="color: #D73A49">=</span><span style="color: #24292E"> name;</span></span>
<span class=line><span style="color: #24292E">  console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> p </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Person</span><span style="color: #24292E">(</span><span style="color: #032F62">&#39;john&#39;</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #6A737D">// Person {name: &quot;john&quot;}</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> p2 </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #6F42C1">person</span><span style="color: #24292E">(</span><span style="color: #032F62">&#39;lucy&#39;</span><span style="color: #24292E">) ;</span></span>
<span class=line><span style="color: #6A737D">// window</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Person</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">name</span><span style="color: #C9D1D9">) {</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.name </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> name;</span></span>
<span class=line><span style="color: #C9D1D9">  console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> p </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Person</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">&#39;john&#39;</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #8B949E">// Person {name: &quot;john&quot;}</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> p2 </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">person</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">&#39;lucy&#39;</span><span style="color: #C9D1D9">) ;</span></span>
<span class=line><span style="color: #8B949E">// window</span></span></code></pre></div>
</code></pre><p>可以看到当使用new关键字来调用构造函数时，this指向了新建的实例化对象，而如果直接调用函数的话，这个this仍然指向了全局。</p><ul><li><h3 id=call-apply-bind>call, apply, bind</h3></li></ul><p>这里介绍三个方法来改变this的指向。</p><ol><li><p>call</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #24292E">fun.</span><span style="color: #6F42C1">call</span><span style="color: #24292E">(thisArg[, arg1[, arg2[, </span><span style="color: #D73A49">...</span><span style="color: #24292E">]]])</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #C9D1D9">fun.</span><span style="color: #D2A8FF">call</span><span style="color: #C9D1D9">(thisArg[, arg1[, arg2[, </span><span style="color: #FF7B72">...</span><span style="color: #C9D1D9">]]])</span></span></code></pre></div>
</code></pre><p>它会立即执行函数，第一个参数是指定执行函数中 <code>this</code> 的上下文，后面的参数是执行函数需要传入的参数；</p></li><li><p>apply</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #24292E">fun.</span><span style="color: #6F42C1">apply</span><span style="color: #24292E">(thisArg[, [arg1, arg2, </span><span style="color: #D73A49">...</span><span style="color: #24292E">]])</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #C9D1D9">fun.</span><span style="color: #D2A8FF">apply</span><span style="color: #C9D1D9">(thisArg[, [arg1, arg2, </span><span style="color: #FF7B72">...</span><span style="color: #C9D1D9">]])</span></span></code></pre></div>
</code></pre><p>它会立即执行函数，第一个参数是指定执行函数中 <code>this</code> 的上下文，第二个参数是一个数组，是传给执行函数的参数（与 <code>call</code> 的区别）；</p></li><li><p>bind</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> foo </span><span style="color: #D73A49">=</span><span style="color: #24292E"> fun.</span><span style="color: #6F42C1">bind</span><span style="color: #24292E">(thisArg[, arg1[, arg2[, </span><span style="color: #D73A49">...</span><span style="color: #24292E">]]]);</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> foo </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> fun.</span><span style="color: #D2A8FF">bind</span><span style="color: #C9D1D9">(thisArg[, arg1[, arg2[, </span><span style="color: #FF7B72">...</span><span style="color: #C9D1D9">]]]);</span></span></code></pre></div>
</code></pre><p>它不会执行函数，而是返回一个新的函数，这个新的函数被指定了 <code>this</code> 的上下文，后面的参数是执行函数需要传入的参数；</p><p><strong>这三个函数其实大同小异，总的目的就是去指定一个函数的上下文（this）</strong></p></li></ol><p>下面举几个例子：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #6A737D">// 为一个普通函数指定 this</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> obj </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&#39;john&#39;</span></span>
<span class=line><span style="color: #24292E">};</span></span>
<span class=line><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">foo</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">  console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line><span style="color: #24292E">foo.</span><span style="color: #6F42C1">call</span><span style="color: #24292E">(obj);</span></span>
<span class=line><span style="color: #6A737D">// Object {name: &quot;john&quot;}</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #8B949E">// 为一个普通函数指定 this</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> obj </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&#39;john&#39;</span></span>
<span class=line><span style="color: #C9D1D9">};</span></span>
<span class=line><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">foo</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">  console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line><span style="color: #C9D1D9">foo.</span><span style="color: #D2A8FF">call</span><span style="color: #C9D1D9">(obj);</span></span>
<span class=line><span style="color: #8B949E">// Object {name: &quot;john&quot;}</span></span></code></pre></div>
</code></pre><p>第二个：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #6A737D">// 为对象中的方法指定一个 this</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> obj </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&#39;john&#39;</span><span style="color: #24292E">,</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #6F42C1">foo</span><span style="color: #24292E">: </span><span style="color: #D73A49">function</span><span style="color: #24292E"> () {</span></span>
<span class=line><span style="color: #24292E">    console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">  }</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> obj2 </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&#39;lucy&#39;</span></span>
<span class=line><span style="color: #24292E">};</span></span>
<span class=line><span style="color: #24292E">obj.foo.</span><span style="color: #6F42C1">call</span><span style="color: #24292E">(obj2);</span></span>
<span class=line><span style="color: #6A737D">// Object {name: &quot;lucy&quot;}</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #8B949E">// 为对象中的方法指定一个 this</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> obj </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&#39;john&#39;</span><span style="color: #C9D1D9">,</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">foo</span><span style="color: #C9D1D9">: </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> () {</span></span>
<span class=line><span style="color: #C9D1D9">    console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">  }</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> obj2 </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&#39;lucy&#39;</span></span>
<span class=line><span style="color: #C9D1D9">};</span></span>
<span class=line><span style="color: #C9D1D9">obj.foo.</span><span style="color: #D2A8FF">call</span><span style="color: #C9D1D9">(obj2);</span></span>
<span class=line><span style="color: #8B949E">// Object {name: &quot;lucy&quot;}</span></span></code></pre></div>
</code></pre><p>对于构造函数：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Person</span><span style="color: #24292E">(</span><span style="color: #E36209">name</span><span style="color: #24292E">) {</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.name </span><span style="color: #D73A49">=</span><span style="color: #24292E"> name;</span></span>
<span class=line><span style="color: #24292E">  console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> obj </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&#39;qiutc2222222&#39;</span></span>
<span class=line><span style="color: #24292E">};</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> p </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> Person.</span><span style="color: #6F42C1">call</span><span style="color: #24292E">(obj, </span><span style="color: #032F62">&#39;qiutc&#39;</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #6A737D">// Uncaught TypeError: Person.call is not a constructor(…)</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Person</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">name</span><span style="color: #C9D1D9">) {</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.name </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> name;</span></span>
<span class=line><span style="color: #C9D1D9">  console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> obj </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&#39;qiutc2222222&#39;</span></span>
<span class=line><span style="color: #C9D1D9">};</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> p </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> Person.</span><span style="color: #D2A8FF">call</span><span style="color: #C9D1D9">(obj, </span><span style="color: #A5D6FF">&#39;qiutc&#39;</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #8B949E">// Uncaught TypeError: Person.call is not a constructor(…)</span></span></code></pre></div>
</code></pre><p>可以发现直接使用会报错，因为person.call并不是一个构造函数，换成bind话就不会报错了：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Person</span><span style="color: #24292E">(</span><span style="color: #E36209">name</span><span style="color: #24292E">) {</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.name </span><span style="color: #D73A49">=</span><span style="color: #24292E"> name;</span></span>
<span class=line><span style="color: #24292E">  console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> obj </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&#39;lucy&#39;</span></span>
<span class=line><span style="color: #24292E">};</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> Person2 </span><span style="color: #D73A49">=</span><span style="color: #24292E"> Person.</span><span style="color: #6F42C1">bind</span><span style="color: #24292E">(obj);</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> p </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Person2</span><span style="color: #24292E">(</span><span style="color: #032F62">&#39;john&#39;</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #6A737D">// Person {name: &quot;john&quot;}</span></span>
<span class=line><span style="color: #24292E">console.</span><span style="color: #6F42C1">log</span><span style="color: #24292E">(obj);</span></span>
<span class=line><span style="color: #6A737D">// Object {name: &quot;lucy&quot;}</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Person</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">name</span><span style="color: #C9D1D9">) {</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.name </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> name;</span></span>
<span class=line><span style="color: #C9D1D9">  console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> obj </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&#39;lucy&#39;</span></span>
<span class=line><span style="color: #C9D1D9">};</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> Person2 </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> Person.</span><span style="color: #D2A8FF">bind</span><span style="color: #C9D1D9">(obj);</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> p </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Person2</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">&#39;john&#39;</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #8B949E">// Person {name: &quot;john&quot;}</span></span>
<span class=line><span style="color: #C9D1D9">console.</span><span style="color: #D2A8FF">log</span><span style="color: #C9D1D9">(obj);</span></span>
<span class=line><span style="color: #8B949E">// Object {name: &quot;lucy&quot;}</span></span></code></pre></div>
</code></pre><p>打印出来的是 <code>Person</code> 实例化出来的对象，而和 <code>obj</code> 没有关系，而 <code>obj</code> 也没有发生变化，说明，我们给 <code>Person</code> 指定 <code>this</code> 上下文并没有生效；</p><p>因此可以得出： <strong>使用 bind 给一个构造函数指定 <code>this</code>，在 <code>new</code> 这个构造函数的时候，<code>bind</code> 函数所指定的 <code>this</code> 并不会生效</strong>。</p></div><div class=footer><hr><div class=footer-link><a href=/archive><i class="fa fa-archive" aria-hidden=true></i></a><a target=_blank href=https://twitter.com/chow_won><i class="fa fa-twitter" aria-hidden=true></i></a> <a target=_blank href=https://github.com/zoubingwu><i class="fa fa-github" aria-hidden=true></i></a> <a target=_blank href=mailto:zoubingwu@gmail.com><i class="fa fa-envelope" aria-hidden=true></i></a></div>© 2016-2021 zoubingwu. All rights reserved.</div></div></body></html>