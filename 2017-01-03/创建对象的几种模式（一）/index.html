<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"><meta name=keywords content=blog,html,css,javascript,react,vue,nodejs><meta name=description content="zoubingwu 个人博客, zoubingwu's blog"><link href=/assets/images/favicon.ico rel=bookmark type=image/x-icon><link href=/assets/images/favicon.ico rel=icon type=image/x-icon><link href=/assets/images/favicon.ico rel="shortcut icon" type=image/x-icon><link rel=stylesheet href=/assets/css/main.css type=text/css><link rel=preload href=/assets/fonts/googlefont.css as=style><link rel=preload href=https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css as=style><link rel=stylesheet href=/assets/fonts/googlefont.css as=style><link rel=stylesheet href=https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css as=style><link rel=alternate type=application/rss+xml title="RSS Feed for zoubingwu's blog" href=/feed.xml><title>创建对象的几种模式（一） | https://zoubingwu.com</title><meta property=og:title content="创建对象的几种模式（一） | https://zoubingwu.com"><meta property=og:locale content=en_US><meta name=description content=""><meta property=og:description content=""><link rel=canonical href=https://zoubingwu.com/2017-01-03/创建对象的几种模式（一）><meta property=og:url content=https://zoubingwu.com/2017-01-03/创建对象的几种模式（一）><meta property=og:site_name content="zoubingwu's blog"><meta property=og:type content=article><meta property=article:published_time content=2017-01-03T22:27:18.000Z><meta name=twitter:card content=summary><meta property=twitter:title content="创建对象的几种模式（一） | https://zoubingwu.com"><script>(function (i, s, o, g, r, a, m) { i['GoogleAnalyticsObject'] = r; (i[r] = i[r]
  || function () { (i[r].q = i[r].q || []).push(arguments); }), (i[r].l = 1 *
  new Date()); (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
  a.async = 1; a.src = g; m.parentNode.insertBefore(a, m); })( window, document,
  'script', 'https://www.google-analytics.com/analytics.js', 'ga' );
  ga('create', 'UA-100363260-1', 'auto'); ga('send', 'pageview');</script></head><body><div class=content-container><div class=post><div class=post-title>创建对象的几种模式（一）</div><span class=post-date><time>3 Jan 2017</time></span><div class=post-tag><ul><li><a><span><i class="fa fa-paperclip" aria-hidden=true></i>javascript</span></a></li></ul></div><ul><li><h4 id=工厂模式>工厂模式</h4><p>我们很多时候会使用对象字面量来创建单个对象，但是这个方式有比较明显的缺点，创建类似对象是会产生很多重复代码，比如：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> person1 </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&quot;nicolas&quot;</span><span style="color: #24292E">,</span></span>
<span class=line><span style="color: #24292E">  age: </span><span style="color: #005CC5">29</span><span style="color: #24292E">,</span></span>
<span class=line><span style="color: #24292E">  job: </span><span style="color: #032F62">&quot;software engineer&quot;</span></span>
<span class=line><span style="color: #24292E">};</span></span>
<span class=line></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> person2 </span><span style="color: #D73A49">=</span><span style="color: #24292E"> {</span></span>
<span class=line><span style="color: #24292E">  name: </span><span style="color: #032F62">&quot;greg&quot;</span><span style="color: #24292E">,</span></span>
<span class=line><span style="color: #24292E">  age: </span><span style="color: #005CC5">27</span><span style="color: #24292E">,</span></span>
<span class=line><span style="color: #24292E">  job: </span><span style="color: #032F62">&quot;doctor&quot;</span></span>
<span class=line><span style="color: #24292E">}</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> person1 </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&quot;nicolas&quot;</span><span style="color: #C9D1D9">,</span></span>
<span class=line><span style="color: #C9D1D9">  age: </span><span style="color: #79C0FF">29</span><span style="color: #C9D1D9">,</span></span>
<span class=line><span style="color: #C9D1D9">  job: </span><span style="color: #A5D6FF">&quot;software engineer&quot;</span></span>
<span class=line><span style="color: #C9D1D9">};</span></span>
<span class=line></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> person2 </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> {</span></span>
<span class=line><span style="color: #C9D1D9">  name: </span><span style="color: #A5D6FF">&quot;greg&quot;</span><span style="color: #C9D1D9">,</span></span>
<span class=line><span style="color: #C9D1D9">  age: </span><span style="color: #79C0FF">27</span><span style="color: #C9D1D9">,</span></span>
<span class=line><span style="color: #C9D1D9">  job: </span><span style="color: #A5D6FF">&quot;doctor&quot;</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span></code></pre></div>
</code></pre><p>每次创建一个新对象就需要重新输入每一个属性，为了解决这个问题，我们开始使用工厂模式的一种变体，使用一个函数来封装以特定接口创建对象的细节，如下：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">createPerson</span><span style="color: #24292E">(</span><span style="color: #E36209">name</span><span style="color: #24292E">, </span><span style="color: #E36209">age</span><span style="color: #24292E">, </span><span style="color: #E36209">job</span><span style="color: #24292E">) {</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #D73A49">var</span><span style="color: #24292E"> o </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #005CC5">Object</span><span style="color: #24292E">();</span></span>
<span class=line><span style="color: #24292E">  o.name </span><span style="color: #D73A49">=</span><span style="color: #24292E"> name;</span></span>
<span class=line><span style="color: #24292E">  o.age </span><span style="color: #D73A49">=</span><span style="color: #24292E"> age;</span></span>
<span class=line><span style="color: #24292E">  o.job </span><span style="color: #D73A49">=</span><span style="color: #24292E"> job;</span></span>
<span class=line><span style="color: #24292E">  o.</span><span style="color: #6F42C1">sayName</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">function</span><span style="color: #24292E">(){</span></span>
<span class=line><span style="color: #24292E">    </span><span style="color: #6F42C1">alert</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">.name);</span></span>
<span class=line><span style="color: #24292E">  }</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #D73A49">return</span><span style="color: #24292E"> o;</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> person1 </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #6F42C1">createPerson</span><span style="color: #24292E">(</span><span style="color: #032F62">&quot;nicolas&quot;</span><span style="color: #24292E">, </span><span style="color: #005CC5">29</span><span style="color: #24292E">, </span><span style="color: #032F62">&quot;software enginner&quot;</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> person2 </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #6F42C1">createPerson</span><span style="color: #24292E">(</span><span style="color: #032F62">&quot;greg&quot;</span><span style="color: #24292E">, </span><span style="color: #005CC5">27</span><span style="color: #24292E">, </span><span style="color: #032F62">&quot;doctor&quot;</span><span style="color: #24292E">);</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createPerson</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">name</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">age</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">job</span><span style="color: #C9D1D9">) {</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> o </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #79C0FF">Object</span><span style="color: #C9D1D9">();</span></span>
<span class=line><span style="color: #C9D1D9">  o.name </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> name;</span></span>
<span class=line><span style="color: #C9D1D9">  o.age </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> age;</span></span>
<span class=line><span style="color: #C9D1D9">  o.job </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> job;</span></span>
<span class=line><span style="color: #C9D1D9">  o.</span><span style="color: #D2A8FF">sayName</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9">(){</span></span>
<span class=line><span style="color: #C9D1D9">    </span><span style="color: #D2A8FF">alert</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.name);</span></span>
<span class=line><span style="color: #C9D1D9">  }</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #FF7B72">return</span><span style="color: #C9D1D9"> o;</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> person1 </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createPerson</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">&quot;nicolas&quot;</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">29</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">&quot;software enginner&quot;</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> person2 </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">createPerson</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">&quot;greg&quot;</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">27</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">&quot;doctor&quot;</span><span style="color: #C9D1D9">);</span></span></code></pre></div>
</code></pre><p>这个函数可以接收一些参数来构建一个包含必要信息的对象，可以无数次调用这个函数，而且每次都会返回一个包含三个属性一个方法的对象，工厂模式虽然解决了创建多个相似对象的问题，但是却没有解决对象识别的问题，person1和person2之间并没有内在的联系。因此我们引入了构造函数模式。</p></li><li><h4 id=构造函数模式>构造函数模式</h4><p>构造函数也是函数，只是通过<code>new</code>操作符来调用，并且在内部直接将属性和方法绑定到<code>this</code>变量上，我们可以把之前的例子重写如下：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Person</span><span style="color: #24292E">(</span><span style="color: #E36209">name</span><span style="color: #24292E">, </span><span style="color: #E36209">age</span><span style="color: #24292E">, </span><span style="color: #E36209">job</span><span style="color: #24292E">) {</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.name </span><span style="color: #D73A49">=</span><span style="color: #24292E"> name;</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.age </span><span style="color: #D73A49">=</span><span style="color: #24292E"> age;</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.job </span><span style="color: #D73A49">=</span><span style="color: #24292E"> job;</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.</span><span style="color: #6F42C1">sayName</span><span style="color: #24292E"> </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">function</span><span style="color: #24292E">(){</span></span>
<span class=line><span style="color: #24292E">    </span><span style="color: #6F42C1">alert</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">.name);</span></span>
<span class=line><span style="color: #24292E">  }</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> person1 </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Person</span><span style="color: #24292E">(</span><span style="color: #032F62">&quot;nicolas&quot;</span><span style="color: #24292E">, </span><span style="color: #005CC5">29</span><span style="color: #24292E">, </span><span style="color: #032F62">&quot;software engineer&quot;</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> person2 </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Person</span><span style="color: #24292E">(</span><span style="color: #032F62">&quot;greg&quot;</span><span style="color: #24292E">, </span><span style="color: #005CC5">27</span><span style="color: #24292E">, </span><span style="color: #032F62">&quot;doctor&quot;</span><span style="color: #24292E">);</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Person</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">name</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">age</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">job</span><span style="color: #C9D1D9">) {</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.name </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> name;</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.age </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> age;</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.job </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> job;</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.</span><span style="color: #D2A8FF">sayName</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">function</span><span style="color: #C9D1D9">(){</span></span>
<span class=line><span style="color: #C9D1D9">    </span><span style="color: #D2A8FF">alert</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.name);</span></span>
<span class=line><span style="color: #C9D1D9">  }</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> person1 </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Person</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">&quot;nicolas&quot;</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">29</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">&quot;software engineer&quot;</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> person2 </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Person</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">&quot;greg&quot;</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">27</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">&quot;doctor&quot;</span><span style="color: #C9D1D9">);</span></span></code></pre></div>
</code></pre><p>我们可以看到构造函数中并没有显示的创建对象，也不存在return语句，同时按照惯例一般构造函数的函数名Person首字母使用大写。当使用<code>new</code>操作符调用时，实际上经历了以下四个过程：</p><ol><li>创建一个新对象；</li><li>将构造函数的this赋给新对象；</li><li>为这个新对象添加属性和方法；</li><li>返回新对象。</li></ol><p>最后person1和person2都保存着Person的一个不同的实例，同时他们都一个<code>constructor</code>属性，指向<code>Person</code>。</p><p>构造函数虽然好，但是也有一个主要的缺点，那就是每个内部的同样方法都要在内存中重新创建一遍，比如上面的例子里的sayName方法，实际上每次定义一个函数都相当于每次都实例化了一个函数对象，他们在内存中保存于不同的地址，可以用以下代码证明不同实例上的同名函数其实并不相等：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #6F42C1">alert</span><span style="color: #24292E">(person1.sayName </span><span style="color: #D73A49">==</span><span style="color: #24292E"> person2.sayName); </span><span style="color: #6A737D">// false</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #D2A8FF">alert</span><span style="color: #C9D1D9">(person1.sayName </span><span style="color: #FF7B72">==</span><span style="color: #C9D1D9"> person2.sayName); </span><span style="color: #8B949E">// false</span></span></code></pre></div>
</code></pre><p>其实大可以把函数定义转移到构造函数外部来解决这个问题：</p><pre><code class=language-javascript><div class=shiki-light><pre class=shiki style="background-color: #ffffff"><code><span class=line><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Person</span><span style="color: #24292E">(</span><span style="color: #E36209">name</span><span style="color: #24292E">, </span><span style="color: #E36209">age</span><span style="color: #24292E">, </span><span style="color: #E36209">job</span><span style="color: #24292E">) {</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.name </span><span style="color: #D73A49">=</span><span style="color: #24292E"> name;</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.age </span><span style="color: #D73A49">=</span><span style="color: #24292E"> age;</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.job </span><span style="color: #D73A49">=</span><span style="color: #24292E"> job;</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #005CC5">this</span><span style="color: #24292E">.sayName </span><span style="color: #D73A49">=</span><span style="color: #24292E"> sayName;</span></span>
<span class=line><span style="color: #24292E">  }</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line></span>
<span class=line><span style="color: #D73A49">function</span><span style="color: #24292E"> </span><span style="color: #6F42C1">sayName</span><span style="color: #24292E">() {</span></span>
<span class=line><span style="color: #24292E">  </span><span style="color: #6F42C1">alert</span><span style="color: #24292E">(</span><span style="color: #005CC5">this</span><span style="color: #24292E">.name);</span></span>
<span class=line><span style="color: #24292E">}</span></span>
<span class=line></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> person1 </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Person</span><span style="color: #24292E">(</span><span style="color: #032F62">&quot;nicolas&quot;</span><span style="color: #24292E">, </span><span style="color: #005CC5">29</span><span style="color: #24292E">, </span><span style="color: #032F62">&quot;software engineer&quot;</span><span style="color: #24292E">);</span></span>
<span class=line><span style="color: #D73A49">var</span><span style="color: #24292E"> person2 </span><span style="color: #D73A49">=</span><span style="color: #24292E"> </span><span style="color: #D73A49">new</span><span style="color: #24292E"> </span><span style="color: #6F42C1">Person</span><span style="color: #24292E">(</span><span style="color: #032F62">&quot;greg&quot;</span><span style="color: #24292E">, </span><span style="color: #005CC5">27</span><span style="color: #24292E">, </span><span style="color: #032F62">&quot;doctor&quot;</span><span style="color: #24292E">);</span></span></code></pre></div><div class=shiki-dark><pre class=shiki style="background-color: #0d1117"><code><span class=line><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Person</span><span style="color: #C9D1D9">(</span><span style="color: #FFA657">name</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">age</span><span style="color: #C9D1D9">, </span><span style="color: #FFA657">job</span><span style="color: #C9D1D9">) {</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.name </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> name;</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.age </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> age;</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.job </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> job;</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.sayName </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> sayName;</span></span>
<span class=line><span style="color: #C9D1D9">  }</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line></span>
<span class=line><span style="color: #FF7B72">function</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">sayName</span><span style="color: #C9D1D9">() {</span></span>
<span class=line><span style="color: #C9D1D9">  </span><span style="color: #D2A8FF">alert</span><span style="color: #C9D1D9">(</span><span style="color: #79C0FF">this</span><span style="color: #C9D1D9">.name);</span></span>
<span class=line><span style="color: #C9D1D9">}</span></span>
<span class=line></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> person1 </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Person</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">&quot;nicolas&quot;</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">29</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">&quot;software engineer&quot;</span><span style="color: #C9D1D9">);</span></span>
<span class=line><span style="color: #FF7B72">var</span><span style="color: #C9D1D9"> person2 </span><span style="color: #FF7B72">=</span><span style="color: #C9D1D9"> </span><span style="color: #FF7B72">new</span><span style="color: #C9D1D9"> </span><span style="color: #D2A8FF">Person</span><span style="color: #C9D1D9">(</span><span style="color: #A5D6FF">&quot;greg&quot;</span><span style="color: #C9D1D9">, </span><span style="color: #79C0FF">27</span><span style="color: #C9D1D9">, </span><span style="color: #A5D6FF">&quot;doctor&quot;</span><span style="color: #C9D1D9">);</span></span></code></pre></div>
</code></pre><p>这样以来，person1和person2就共享了全局作用域中的同一个sayName函数，但是新问题又来了：如果对象需要定义很多方法，那么就要定义很多个全局函数，那也就丝毫没有封装性可言了，好在，这些问题我们可以通过原型模式来解决。</p></li></ul></div><div class=footer><hr><div class=footer-link><a href=/archive><i class="fa fa-archive" aria-hidden=true></i></a><a target=_blank href=https://twitter.com/chow_won><i class="fa fa-twitter" aria-hidden=true></i></a> <a target=_blank href=https://github.com/zoubingwu><i class="fa fa-github" aria-hidden=true></i></a> <a target=_blank href=mailto:zoubingwu@gmail.com><i class="fa fa-envelope" aria-hidden=true></i></a></div>© 2016-2021 zoubingwu. All rights reserved.</div></div></body></html>