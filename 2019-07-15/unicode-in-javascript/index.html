<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content=blog,html,css,javascript,react,vue,nodejs><meta name=description content="zoubingwu ä¸ªäººåšå®¢, zoubingwu's blog"><link href=/assets/images/favicon.ico rel=bookmark type=image/x-icon><link href=/assets/images/favicon.ico rel=icon type=image/x-icon><link href=/assets/images/favicon.ico rel="shortcut icon" type=image/x-icon><link rel=stylesheet href=/assets/css/main.css type=text/css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.6.0/style.css as=style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.6.0/style.css><link rel=stylesheet href=/assets/fonts/fontawesome.min.css type=text/css><link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,700;1,300;1,700&display=swap" rel=stylesheet><link rel=alternate type=application/rss+xml title="RSS Feed for zoubingwu's blog" href=/feed.xml><title>Unicode in Javascript | https://zoubingwu.com</title><meta property=og:title content="Unicode in Javascript | https://zoubingwu.com"><meta property=og:locale content=en_US><meta name=description content="Explain how to work with Unicode in JavaScript."><meta property=og:description content="Explain how to work with Unicode in JavaScript."><link rel=canonical href=https://zoubingwu.com/2019-07-15/unicode-in-javascript><meta property=og:url content=https://zoubingwu.com/2019-07-15/unicode-in-javascript><meta property=og:site_name content="zoubingwu's blog"><meta property=og:type content=article><meta property=article:published_time content=2019-07-15T17:13:31.000Z><meta name=twitter:card content=summary><meta property=twitter:title content="Unicode in Javascript | https://zoubingwu.com"><script defer=defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "76b8468271b24f3180af2110f74841c3"}'></script></head><body><main class=content-container><div class=post><div class=post-title>Unicode in Javascript</div><span class=post-date><time>15 Jul 2019</time></span><div class=post-tag><ul><li><a><span><i class="fa fa-paperclip" aria-hidden=true></i>unicode</span></a></li><li><a><span><i class="fa fa-paperclip" aria-hidden=true></i>javascript</span></a></li></ul></div><h1 id=what-is-unicode>What is unicode</h1><p>æœ¬è´¨ä¸Šè®¡ç®—æœºåªå¤„ç†æ•°å­—ï¼Œä¸ºäº†å¤„ç†å­—ç¬¦ï¼Œæœ€åˆåˆ¶å®šäº†ä¸€å¥— ASCII ç¼–ç ï¼Œå¯¹è‹±æ–‡å­—ç¬¦å’Œæ•°å­—åšäº†ç»Ÿä¸€è§„å®šã€‚ä¸€å…±æœ‰ 128 ä¸ªå­—ç¬¦ç¼–ç ï¼Œä¾‹å¦‚å¤§å†™çš„å­—æ¯ A æ˜¯ 65ï¼ˆäºŒè¿›åˆ¶ 01000001ï¼‰ã€‚</p><p>ä½†è€ƒè™‘åˆ°æ•°ç™¾ç§è¯­è¨€æˆåƒä¸Šä¸‡çš„ä¸åŒå­—ç¬¦ï¼Œä¸€ä¸ªå­—èŠ‚å…«ä½ï¼Œæœ€å¤šåªèƒ½è¡¨ç¤º 256 ç§ç¬¦å·ï¼Œæ˜¯è¿œè¿œä¸å¤Ÿçš„ï¼Œå› æ­¤åæ¥å‘å±•å‡ºè®¸å¤šä¸åŒçš„ç¼–ç æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‰“å¼€ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå°±å¿…é¡»çŸ¥é“å®ƒçš„ç¼–ç æ–¹å¼ï¼Œå¦åˆ™ç”¨é”™è¯¯çš„ç¼–ç æ–¹å¼è§£è¯»ï¼Œå°±ä¼šå‡ºç°ä¹±ç ã€‚å°¤å…¶éšç€äº’è”ç½‘çš„æ™®åŠï¼Œä¸€ä¸ªç»Ÿä¸€çš„ç¼–ç æˆä¸ºäº†ä¸€ä¸ªéå¸¸å¹¿æ³›çš„éœ€æ±‚ï¼Œäººä»¬éœ€è¦æœ‰ä¸€ç§ç¼–ç ï¼Œå°†ä¸–ç•Œä¸Šæ‰€æœ‰çš„ç¬¦å·éƒ½çº³å…¥å…¶ä¸­ï¼Œæ¯ä¸€ä¸ªç¬¦å·éƒ½ç»™äºˆä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¼–ç ï¼Œä»è€Œè§£å†³ä¹±ç é—®é¢˜ï¼Œè¿™å°±æ˜¯ Unicodeã€‚</p><blockquote><p>Unicode provides a unique number for every character, no matter what the platform, no matter what the program, no matter what the language.</p></blockquote><h1 id=encoding-of-source-files>Encoding of source files</h1><p>åœ¨ web ç¯å¢ƒä¸­ï¼Œä¸€ä¸ªæ–‡ä»¶çš„ç¼–ç æ–¹å¼æ˜¯å¦‚ä½•ç¡®å®šçš„å‘¢ï¼Ÿ</p><p>å¦‚æœæ²¡æœ‰è®¾ç½®è¿‡ï¼Œä¼šæŒ‰ç…§ local çš„å­—ç¬¦é›†ã€‚</p><p>å¯ä»¥é€šè¿‡ <a href=https://en.wikipedia.org/wiki/Byte_order_mark>BOM</a> æ¥è®¾ç½®ï¼Œä¸è¿‡ç°åœ¨ä¸»æµçš„ç¼–è¾‘å™¨éƒ½ä¸ä¼šåœ¨æ–‡ä»¶å¤´æ·»åŠ  BOM äº†ã€‚</p><p>Unicode standard:</p><blockquote><p>â€¦ Use of a BOM is neither required nor recommended for UTF-8, but may be encountered in contexts where UTF-8 data is converted from other encoding forms that use a BOM or where the BOM is used as a UTF-8 signature.</p></blockquote><p>W3C says:</p><blockquote><p>In HTML5 browsers are required to recognize the UTF-8 BOM and use it to detect the encoding of the page, and recent versions of major browsers handle the BOM as expected when used for UTF-8 encoded pages. â€“ <a href=https://www.w3.org/International/questions/qa-byte-order-mark>https://www.w3.org/International/questions/qa-byte-order-mark</a></p></blockquote><p>å¦‚æœæ–‡ä»¶é€šè¿‡ HTTP åè®®è·å–ï¼Œ<code>Content-Type</code> å¤´å¯ä»¥è®¾ç½®ç¼–ç æ–¹å¼ï¼š</p><pre><code><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #abb2bf">Content-Type: application/javascript; charset=utf-8</span></span></code></pre>
</code></pre><p>å¦‚æœæ²¡æœ‰åœ¨ HTTP å¤´éƒ¨ä¸­è®¾ç½®ï¼Œä¼šæ£€æŸ¥ <code>script</code> tag çš„ charset å±æ€§ï¼š</p><pre><code class=language-html><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">src</span><span style="color: #ABB2BF">=</span><span style="color: #98C379">&quot;./app.js&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">charset</span><span style="color: #ABB2BF">=</span><span style="color: #98C379">&quot;utf-8&quot;</span><span style="color: #ABB2BF">&gt;</span></span></code></pre>
</code></pre><p>å¦‚æœä¹Ÿæ²¡æœ‰è®¾ç½®çš„è¯ï¼Œä¼šæ£€æŸ¥ document charset meta tag</p><pre><code class=language-html><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">head</span><span style="color: #ABB2BF">&gt;</span></span>
<span class=line><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">meta</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">charset</span><span style="color: #ABB2BF">=</span><span style="color: #98C379">&quot;utf-8&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class=line><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">head</span><span style="color: #ABB2BF">&gt;</span></span></code></pre>
</code></pre><h1 id=inside-javascript>Inside Javascript</h1><p>ä¸ç®¡ Javascript æ–‡ä»¶çš„ç¼–ç æ˜¯ä»€ä¹ˆï¼ŒJavascript å†…éƒ¨éƒ½ä¼šåœ¨æ‰§è¡Œä¹‹å‰è½¬æ¢ä¸º UTF-16ï¼Œas the ECMAScript standard says:</p><blockquote><p>When a String contains actual textual data, each element is considered to be a single UTF-16 code unit.</p></blockquote><h1 id=unicode-in-a-string>Unicode in a string</h1><p>Unicode å¯ä»¥é€šè¿‡ <code>\uXXXX</code> çš„æ ¼å¼æ¥ä½œä¸ºå­—ç¬¦ä¸²ä½¿ç”¨</p><pre><code class=language-js><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">s1</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;</span><span style="color: #56B6C2">\u00E9</span><span style="color: #98C379">&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// Ã©</span></span></code></pre>
</code></pre><p>ä¹Ÿå¯ä»¥é€šè¿‡ç»„åˆä¸¤ä¸ª unicode å­—ç¬¦æ¥è¡¨ç¤ºï¼š</p><pre><code class=language-js><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">s2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;</span><span style="color: #56B6C2">\u0065\u0301</span><span style="color: #98C379">&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// eÌ</span></span></code></pre>
</code></pre><p>æ³¨æ„è¿™ä¸¤ä¸ªå­—ç¬¦çœ‹ä¸Šå»ç›¸åŒï¼Œä½†å…¶å®æ˜¯ä¸åŒçš„ï¼š</p><pre><code class=language-js><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #E06C75">s1</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">s2</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// false</span></span>
<span class=line><span style="color: #E5C07B">s1</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">length</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// 1</span></span>
<span class=line><span style="color: #E5C07B">s2</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">length</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// 2</span></span></code></pre>
</code></pre><p>ä¹Ÿå¯ä»¥é€šè¿‡ç»„åˆä¸€ä¸ªæ™®é€šå­—ç¬¦å’Œ unicode å­—ç¬¦ï¼š</p><pre><code class=language-js><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">s3</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;e</span><span style="color: #56B6C2">\u0301</span><span style="color: #98C379">&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// eÌ</span></span>
<span class=line><span style="color: #E5C07B">s3</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">length</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// true</span></span>
<span class=line><span style="color: #E06C75">s2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">s3</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// true</span></span>
<span class=line><span style="color: #E06C75">s1</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">!==</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">s3</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// true</span></span></code></pre>
</code></pre><p>å¯ä»¥é€šè¿‡ unicode æ¥æ£€æŸ¥ä¸­æ–‡å­—ç¬¦ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹ <a href=http://www.unicode.org/reports/tr38/#BlockListing>http://www.unicode.org/reports/tr38/#BlockListing</a>ï¼š</p><pre><code class=language-js><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #98C379">/</span><span style="color: #D19A66">[\u4E00-\u9FCC]</span><span style="color: #98C379">/</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// CJK Unified Ideographs</span></span>
<span class=line><span style="color: #98C379">/</span><span style="color: #D19A66">[\u3400-\u4DB5]</span><span style="color: #98C379">/</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// CJK Unified Ideographs Extension A</span></span>
<span class=line><span style="color: #98C379">/</span><span style="color: #D19A66">[\ud840-\ud868][\udc00-\udfff]</span><span style="color: #ABB2BF">|</span><span style="color: #D19A66">\ud869[\udc00-\uded6]</span><span style="color: #98C379">/</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// CJK Unified Ideographs Extension B</span></span>
<span class=line><span style="color: #98C379">/</span><span style="color: #D19A66">\ud869[\udf00-\udfff]</span><span style="color: #ABB2BF">|</span><span style="color: #D19A66">[\ud86a-\ud86c][\udc00-\udfff]</span><span style="color: #ABB2BF">|</span><span style="color: #D19A66">\ud86d[\udc00-\udf34]</span><span style="color: #98C379">/</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// CJK Unified Ideographs Extension C</span></span>
<span class=line><span style="color: #98C379">/</span><span style="color: #D19A66">\ud86d[\udf40-\udfff]</span><span style="color: #ABB2BF">|</span><span style="color: #D19A66">\ud86e[\udc00-\udc1d]</span><span style="color: #98C379">/</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// CJK Unified Ideographs Extension D</span></span></code></pre>
</code></pre><p>å½“æœç´¢ä¸­æ–‡ä¿¡æ¯æ—¶ä½ ä¼šå‘ç°å¤§éƒ¨åˆ†æ­£åˆ™éƒ½æ˜¯ç”¨çš„ç¬¬ä¸€ä¸ªã€‚</p><h2 id=normalize>Normalize</h2><p>ä¸ºäº†è§£å†³ä¸Šé¢è¿™ç§çœ‹ä¸Šå»ç›¸åŒå®é™…ä¸Šæ˜¯ä¸åŒç»„åˆçš„é—®é¢˜ï¼ŒES2015 æä¾›äº†ä¸€ä¸ª normalize çš„ API</p><pre><code class=language-js><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #E5C07B">s1</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">normalize</span><span style="color: #ABB2BF">() </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">s2</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">normalize</span><span style="color: #ABB2BF">() </span><span style="color: #7F848E; font-style: italic">//true</span></span></code></pre>
</code></pre><h2 id=convert>Convert</h2><p>åè¿›åˆ¶å’Œåå…­è¿›åˆ¶</p><pre><code class=language-js><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #D19A66">0x4e00</span><span style="color: #ABB2BF"> </span><span style="color: #7F848E; font-style: italic">// decimal: 19968</span></span>
<span class=line><span style="color: #56B6C2">parseInt</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;4e00&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">16</span><span style="color: #ABB2BF">) </span><span style="color: #7F848E; font-style: italic">// 19968, hexdecimal -&gt; decimal</span></span>
<span class=line><span style="color: #ABB2BF">(</span><span style="color: #D19A66">19968</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">toString</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">16</span><span style="color: #ABB2BF">) </span><span style="color: #7F848E; font-style: italic">// &#39;4e00&#39;, decimal -&gt; hexdecimal</span></span></code></pre>
</code></pre><p>å­—ç¬¦å’Œæ•°å­—è½¬æ¢</p><pre><code class=language-js><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">fromCodePoint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">19968</span><span style="color: #ABB2BF">)</span></span>
<span class=line><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">fromCodePoint</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0x4e00</span><span style="color: #ABB2BF">) </span><span style="color: #7F848E; font-style: italic">// æ±‰å­— `ä¸€`</span></span>
<span class=line></span>
<span class=line><span style="color: #98C379">&#39;ä¸€&#39;</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">codePointAt</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">) </span><span style="color: #7F848E; font-style: italic">// 19968</span></span></code></pre>
</code></pre><h2 id=emojis>Emojis</h2><p>Emojis å®é™…ä¸Šä¹Ÿæ˜¯ unicode å­—ç¬¦ï¼Œå› æ­¤å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹ <a href=https://unicode.org/emoji/charts/full-emoji-list.html>https://unicode.org/emoji/charts/full-emoji-list.html</a></p><pre><code class=language-js><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">s4</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;ğŸ¶&#39;</span></span></code></pre>
</code></pre><h1 id=ref>ref</h1><ul><li><a href=https://unicode.org/standard/WhatIsUnicode.html>https://unicode.org/standard/WhatIsUnicode.html</a></li><li><a href=http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html>http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html</a></li><li><a href=https://en.wikipedia.org/wiki/Byte_order_mark>https://en.wikipedia.org/wiki/Byte_order_mark</a></li><li><a href=https://stackoverflow.com/questions/21109011/javascript-unicode-string-chinese-character-but-no-punctuation>https://stackoverflow.com/questions/21109011/javascript-unicode-string-chinese-character-but-no-punctuation</a></li><li><a href=https://tools.ietf.org/html/rfc4329>https://tools.ietf.org/html/rfc4329</a></li></ul></div><div class=footer><hr><div class=footer-link><a href=/archive aria-label="Read more about all archives"><i class="fa fa-archive" aria-hidden=true></i> </a><a target=_blank href=https://twitter.com/chow_won aria-label="Read more on twitter"><i class="fa fa-twitter" aria-hidden=true></i></a> <a target=_blank href=https://github.com/zoubingwu aria-label="Read more on github"><i class="fa fa-github" aria-hidden=true></i> </a><a target=_blank href=mailto:zoubingwu@gmail.com aria-label=Email><i class="fa fa-envelope" aria-hidden=true></i></a></div>Â© 2016-2023 zoubingwu. All rights reserved.</div></main></body></html>