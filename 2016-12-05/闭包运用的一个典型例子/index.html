<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content=blog,html,css,javascript,react,vue,nodejs><meta name=description content="zoubingwu 个人博客, zoubingwu's blog"><link href=/assets/images/favicon.ico rel=bookmark type=image/x-icon><link href=/assets/images/favicon.ico rel=icon type=image/x-icon><link href=/assets/images/favicon.ico rel="shortcut icon" type=image/x-icon><link rel=stylesheet href=/assets/css/main.css type=text/css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.6.0/style.css as=style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.6.0/style.css><link rel=stylesheet href=/assets/fonts/font-awesome.min.css type=text/css><link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,700;1,300;1,700&display=swap" rel=stylesheet><link rel=alternate type=application/rss+xml title="RSS Feed for zoubingwu's blog" href=/feed.xml><title>闭包运用的一个典型例子 | https://zoubingwu.com</title><meta property=og:title content="闭包运用的一个典型例子 | https://zoubingwu.com"><meta property=og:locale content=en_US><meta name=description content=""><meta property=og:description content=""><link rel=canonical href=https://zoubingwu.com/2016-12-05/闭包运用的一个典型例子><meta property=og:url content=https://zoubingwu.com/2016-12-05/闭包运用的一个典型例子><meta property=og:site_name content="zoubingwu's blog"><meta property=og:type content=article><meta property=article:published_time content=2016-12-05T10:27:18.000Z><meta name=twitter:card content=summary><meta property=twitter:title content="闭包运用的一个典型例子 | https://zoubingwu.com"><script defer=defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "76b8468271b24f3180af2110f74841c3"}'></script></head><body><main class=content-container><div class=post><div class=post-title>闭包运用的一个典型例子</div><span class=post-date><time>5 Dec 2016</time></span><div class=post-tag><ul><li><a><span><i class="fa fa-paperclip" aria-hidden=true></i>javascript</span></a></li></ul></div><p>由于函数内部的私有变量在函数外部是无法直接访问的，所以通过闭包我们可以为内部的私有变量来创建一个接口去读取和修改，下面就是一个典型的例子：</p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">var</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">foo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> ( </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF">() {</span></span>
<span class=line><span style="color: #ABB2BF">    </span><span style="color: #C678DD">var</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">secret</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;secret&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// “闭包”内的函数可以访问 secret 变量，而 secret 变量对于外部却是隐藏的</span></span>
<span class=line><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">get_secret</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> () {</span></span>
<span class=line><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 通过定义的接口来访问 secret</span></span>
<span class=line><span style="color: #ABB2BF">            </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">secret</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">        },</span></span>
<span class=line><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">set_secret</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> ( </span><span style="color: #E06C75; font-style: italic">new_secret</span><span style="color: #ABB2BF"> ) {</span></span>
<span class=line><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 通过定义的接口来修改 secret</span></span>
<span class=line><span style="color: #ABB2BF">            </span><span style="color: #E06C75">secret</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">new_secret</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">        }</span></span>
<span class=line><span style="color: #ABB2BF">    };</span></span>
<span class=line><span style="color: #ABB2BF">} () );</span></span>
<span class=line></span>
<span class=line><span style="color: #E5C07B">foo</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">get_secret</span><span style="color: #ABB2BF"> (); </span><span style="color: #7F848E; font-style: italic">// 得到 &#39;secret&#39;</span></span>
<span class=line><span style="color: #E5C07B">foo</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">secret</span><span style="color: #ABB2BF">; </span><span style="color: #7F848E; font-style: italic">// Type error，访问不能</span></span>
<span class=line><span style="color: #E5C07B">foo</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">set_secret</span><span style="color: #ABB2BF"> (</span><span style="color: #98C379">&#39;a new secret&#39;</span><span style="color: #ABB2BF">); </span><span style="color: #7F848E; font-style: italic">// 通过函数接口，我们访问并修改了 secret 变量</span></span>
<span class=line><span style="color: #E5C07B">foo</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">get_secret</span><span style="color: #ABB2BF"> (); </span><span style="color: #7F848E; font-style: italic">// 得到 &#39;a new secret&#39;</span></span></code></pre>
</code></pre></div><div class=footer><hr><div class=footer-link><a href=/archive aria-label="Read more about all archives"><i class="fa fa-archive" aria-hidden=true></i> </a><a target=_blank href=https://twitter.com/chow_won aria-label="Read more on twitter"><i class="fa fa-twitter" aria-hidden=true></i></a> <a target=_blank href=https://github.com/zoubingwu aria-label="Read more on github"><i class="fa fa-github" aria-hidden=true></i> </a><a target=_blank href=mailto:zoubingwu@gmail.com aria-label=Email><i class="fa fa-envelope" aria-hidden=true></i></a></div>© 2016-2023 zoubingwu. All rights reserved.</div></main></body></html>