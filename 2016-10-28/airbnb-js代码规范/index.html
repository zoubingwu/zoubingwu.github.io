<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content=blog,html,css,javascript,react,vue,nodejs><meta name=description content="zoubingwu 个人博客, zoubingwu's blog"><link href=/assets/images/favicon.ico rel=bookmark type=image/x-icon><link href=/assets/images/favicon.ico rel=icon type=image/x-icon><link href=/assets/images/favicon.ico rel="shortcut icon" type=image/x-icon><link rel=stylesheet href=/assets/css/main.css type=text/css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.6.0/style.css as=style><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/lxgw-wenkai-lite-webfont@1.6.0/style.css><link rel=stylesheet href=/assets/fonts/fontawesome.min.css type=text/css><link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,700;1,300;1,700&display=swap" rel=stylesheet><link rel=alternate type=application/rss+xml title="RSS Feed for zoubingwu's blog" href=/feed.xml><title>Airbnb js代码规范 | https://zoubingwu.com</title><meta property=og:title content="Airbnb js代码规范 | https://zoubingwu.com"><meta property=og:locale content=en_US><meta name=description content=""><meta property=og:description content=""><link rel=canonical href=https://zoubingwu.com/2016-10-28/airbnb-js代码规范><meta property=og:url content=https://zoubingwu.com/2016-10-28/airbnb-js代码规范><meta property=og:site_name content="zoubingwu's blog"><meta property=og:type content=article><meta property=article:published_time content=2016-10-28T22:13:27.000Z><meta name=twitter:card content=summary><meta property=twitter:title content="Airbnb js代码规范 | https://zoubingwu.com"><script defer=defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "76b8468271b24f3180af2110f74841c3"}'></script></head><body><main class=content-container><div class=post><div class=post-title>Airbnb js代码规范</div><span class=post-date><time>28 Oct 2016</time></span><div class=post-tag><ul><li><a><span><i class="fa fa-paperclip" aria-hidden=true></i>javascript</span></a></li><li><a><span><i class="fa fa-paperclip" aria-hidden=true></i>code style</span></a></li></ul></div><p><a href=https://github.com/airbnb/javascript>https://github.com/airbnb/javascript</a></p><p>Airbnb关于JS的代码规范，还是推荐阅读英文原文，尝试缓慢翻译填坑中.</p><p>注意：有很多内容是ES6的规范，使用可以按照自己的需要，并注意浏览器兼容性。</p><p>correct me if something wrong :D</p><p>(stop updating currently since there are so many es6 stuff and I can&#39;t guarantee the quality without good understanding of es6.)</p><h2 id=目录>目录</h2><ol><li><a href=https://github.com/airbnb/javascript#types>Types</a> 类型</li><li><a href=https://github.com/airbnb/javascript#references>References</a> 引用</li><li><a href=https://github.com/airbnb/javascript#objects>Objects</a> 对象</li><li><a href=https://github.com/airbnb/javascript#arrays>Arrays</a> 数组</li><li><a href=https://github.com/airbnb/javascript#destructuring>Destructuring</a> 去构造化</li><li><a href=https://github.com/airbnb/javascript#strings>Strings</a> 字符串</li><li><a href=https://github.com/airbnb/javascript#functions>Functions</a> 函数</li><li><a href=https://github.com/airbnb/javascript#arrow-functions>Arrow Functions</a> 箭头函数</li><li><a href=https://github.com/airbnb/javascript#classes--constructors>Classes &amp; Constructors</a> 类／构造器</li><li><a href=https://github.com/airbnb/javascript#modules>Modules</a> 模组</li><li><a href=https://github.com/airbnb/javascript#iterators-and-generators>Iterators and Generators</a></li><li><a href=https://github.com/airbnb/javascript#properties>Properties</a></li><li><a href=https://github.com/airbnb/javascript#variables>Variables</a></li><li><a href=https://github.com/airbnb/javascript#hoisting>Hoisting</a></li><li><a href=https://github.com/airbnb/javascript#comparison-operators--equality>Comparison Operators &amp; Equality</a></li><li><a href=https://github.com/airbnb/javascript#blocks>Blocks</a></li><li><a href=https://github.com/airbnb/javascript#comments>Comments</a></li><li><a href=https://github.com/airbnb/javascript#whitespace>Whitespace</a></li><li><a href=https://github.com/airbnb/javascript#commas>Commas</a></li><li><a href=https://github.com/airbnb/javascript#semicolons>Semicolons</a></li><li><a href=https://github.com/airbnb/javascript#type-casting--coercion>Type Casting &amp; Coercion</a></li><li><a href=https://github.com/airbnb/javascript#naming-conventions>Naming Conventions</a></li><li><a href=https://github.com/airbnb/javascript#accessors>Accessors</a></li><li><a href=https://github.com/airbnb/javascript#events>Events</a></li><li><a href=https://github.com/airbnb/javascript#jquery>jQuery</a></li><li><a href=https://github.com/airbnb/javascript#ecmascript-5-compatibility>ECMAScript 5 Compatibility</a></li><li><a href=https://github.com/airbnb/javascript#ecmascript-6-es-2015-styles>ECMAScript 6+ (ES 2015+) Styles</a></li><li><a href=https://github.com/airbnb/javascript#testing>Testing</a></li><li><a href=https://github.com/airbnb/javascript#performance>Performance</a></li><li><a href=https://github.com/airbnb/javascript#resources>Resources</a></li><li><a href=https://github.com/airbnb/javascript#in-the-wild>In the Wild</a></li><li><a href=https://github.com/airbnb/javascript#translation>Translation</a></li><li><a href=https://github.com/airbnb/javascript#the-javascript-style-guide-guide>The JavaScript Style Guide Guide</a></li><li><a href=https://github.com/airbnb/javascript#chat-with-us-about-javascript>Chat With Us About JavaScript</a></li><li><a href=https://github.com/airbnb/javascript#contributors>Contributors</a></li><li><a href=https://github.com/airbnb/javascript#license>License</a></li></ol><h2 id=type-类型>Type 类型</h2><ul><li><p>1.1 当你处理一个如下简单的数据类型时，你是直接对它对应的值进行操作。</p><ul><li><code>string</code></li><li><code>number</code></li><li><code>boolean</code></li><li><code>null</code></li><li><code>undefined</code></li></ul><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">foo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">bar</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">foo</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #E06C75">bar</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">9</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">foo</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">bar</span><span style="color: #ABB2BF">); </span><span style="color: #7F848E; font-style: italic">// =&gt; 1, 9</span></span></code></pre>
</code></pre></li><li><p>1.2 当你处理一个如下复杂的数据类型时，你处理的是它的引用。</p><ul><li><code>object</code></li><li><code>array</code></li><li><code>function</code></li></ul><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">foo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">];</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">bar</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">foo</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #E06C75">bar</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">9</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">foo</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">], </span><span style="color: #E06C75">bar</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]); </span><span style="color: #7F848E; font-style: italic">// =&gt; 9, 9</span></span></code></pre>
</code></pre></li></ul><h2 id=references-引用>References 引用</h2><ul><li><p>2.1 使用 <code>const</code> 来声明所有的引用，避免使用 <code>var</code>。详见 eslint: <a href=http://eslint.org/docs/rules/prefer-const.html><code>prefer-const</code></a>, <a href=http://eslint.org/docs/rules/no-const-assign.html><code>no-const-assign</code></a></p><blockquote><p>为什么？因为这样可以保证你不会重新给引用赋一个另外的值，避免以此引起的bug和对代码的理解困难</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">var</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">a</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #C678DD">var</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">b</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">a</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">b</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">;</span></span></code></pre>
</code></pre></li><li><p>2.2 如果你必须要重新给一个引用赋值,，使用 <code>let</code> 而不是<code>var</code>。详见 eslint: <a href=http://eslint.org/docs/rules/no-var.html><code>no-var</code></a> jscs: <a href=http://jscs.info/rule/disallowVar><code>disallowVar</code></a></p><blockquote><p>为什么？因为<code>let</code>是块级作用，而不像<code>var</code>有着函数作用域。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">var</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">count</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">count</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good, use the let.</span></span>
<span class=line><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">count</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">count</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span></code></pre>
</code></pre></li><li><p>2.3 注意，使用<code>let</code>和<code>const</code>声明的变量，都只作用于块级作用域。</p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// const and let only exist in the blocks they are defined in.</span></span>
<span class=line><span style="color: #ABB2BF">{</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">a</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">b</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">); </span><span style="color: #7F848E; font-style: italic">// ReferenceError</span></span>
<span class=line><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">b</span><span style="color: #ABB2BF">); </span><span style="color: #7F848E; font-style: italic">// ReferenceError</span></span></code></pre>
</code></pre></li></ul><h2 id=object-对象>Object 对象</h2><ul><li><p>3.1 尽量使用字面语法来直接创建对象。详见eslint: <a href=http://eslint.org/docs/rules/no-new-object.html><code>no-new-object</code></a></p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">item</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Object</span><span style="color: #ABB2BF">();</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">item</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {};</span></span></code></pre>
</code></pre></li><li><p>3.2 创建一个有着动态的属性名的对象时，尽量使用计算后的属性名。</p><blockquote><p>为什么？这样可以让你同时定义一个对象所有的属性</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">getKey</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">k</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">`a key named </span><span style="color: #C678DD">${</span><span style="color: #E06C75">k</span><span style="color: #C678DD">}</span><span style="color: #98C379">`</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">id</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;San Francisco&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span>
<span class=line><span style="color: #E06C75">obj</span><span style="color: #ABB2BF">[</span><span style="color: #61AFEF">getKey</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;enabled&#39;</span><span style="color: #ABB2BF">)] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">id</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;San Francisco&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  [</span><span style="color: #61AFEF">getKey</span><span style="color: #E06C75">(</span><span style="color: #98C379">&#39;enabled&#39;</span><span style="color: #E06C75">)</span><span style="color: #ABB2BF">]: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span></code></pre>
</code></pre></li><li><p>3.3 使用简写的属性方法。详见eslint: <a href=http://eslint.org/docs/rules/object-shorthand.html><code>object-shorthand</code></a> jscs: <a href=http://jscs.info/rule/requireEnhancedObjectLiterals><code>requireEnhancedObjectLiterals</code></a></p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">atom</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">,</span></span>
<span class=line></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">addValue</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75; font-style: italic">value</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">atom</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  },</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">atom</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">,</span></span>
<span class=line></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">addValue</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">value</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">atom</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  },</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span></code></pre>
</code></pre></li><li><p>3.4使用简写的属性值。详见 <a href=http://eslint.org/docs/rules/object-shorthand.html><code>object-shorthand</code></a> jscs: <a href=http://jscs.info/rule/requireEnhancedObjectLiterals><code>requireEnhancedObjectLiterals</code></a></p><blockquote><p>为什么？书写更简短，描述性更强。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">lukeSkywalker</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;Luke Skywalker&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">lukeSkywalker</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">lukeSkywalker</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">lukeSkywalker</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span></code></pre>
</code></pre></li><li><p>3.5 把简写的属性名统一分组写在声明对象最开始的地方。</p><blockquote><p>为什么？这样一下就能看出来哪些属性使用了简写。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">anakinSkywalker</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;Anakin Skywalker&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">lukeSkywalker</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;Luke Skywalker&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">episodeOne</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">twoJediWalkIntoACantina</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">lukeSkywalker</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">episodeThree</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mayTheFourth</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">anakinSkywalker</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">lukeSkywalker</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">anakinSkywalker</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">episodeOne</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">twoJediWalkIntoACantina</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">episodeThree</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mayTheFourth</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span></code></pre>
</code></pre></li><li><p>3.6 只有在属性名是无效的标识符的时候才使用引号包起来使之成为字符串（比如数字开头或带有空格的多个词）。详见eslint: <a href=http://eslint.org/docs/rules/quote-props.html><code>quote-props</code></a> jscs: <a href=http://jscs.info/rule/disallowQuotedKeysInObjects><code>disallowQuotedKeysInObjects</code></a></p><blockquote><p>为什么？一般主观上来说这样更容易阅读，也有利于语法高亮和一些JS引擎优化。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">bad</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #98C379">&#39;foo&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #98C379">&#39;bar&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #98C379">&#39;data-blah&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">good</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">foo</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">bar</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #98C379">&#39;data-blah&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">,</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span></code></pre>
</code></pre></li><li><p>3.7 尽量不要直接调用某些<code>Object.prototype</code>的方法，比如 <code>hasOwnProperty</code>, <code>propertyIsEnumerable</code>, 和<code>isPrototypeOf</code>.</p><blockquote><p>为什么？因为某些对象里这些方法可能被覆写了，比如这种<code>{ hasOwnProperty: false }</code> ，或者是一个null对象 (<code>Object.create(null)</code>).</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">object</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">hasOwnProperty</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">));</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">Object</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">prototype</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">hasOwnProperty</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">call</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">object</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">));</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// best</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">has</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Object</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">prototype</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">hasOwnProperty</span><span style="color: #ABB2BF">; </span><span style="color: #7F848E; font-style: italic">// cache the lookup once, in module scope.</span></span>
<span class=line><span style="color: #7F848E; font-style: italic">/* or */</span></span>
<span class=line><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">has</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;has&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">…</span></span>
<span class=line><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">has</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">call</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">object</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">));</span></span></code></pre>
</code></pre></li><li><p>3.8 浅复制对象时使用<code>...</code>操作符而不是使用 <a href=https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign><code>Object.assign</code></a> </p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// very bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">original</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">b</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> };</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">copy</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Object</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">assign</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">original</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">c</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> }); </span><span style="color: #7F848E; font-style: italic">// this mutates `original` ಠ_ಠ</span></span>
<span class=line><span style="color: #C678DD">delete</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">copy</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">; </span><span style="color: #7F848E; font-style: italic">// so does this</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">original</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">b</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> };</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">copy</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Object</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">assign</span><span style="color: #ABB2BF">({}, </span><span style="color: #E06C75">original</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">c</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> }); </span><span style="color: #7F848E; font-style: italic">// copy =&gt; { a: 1, b: 2, c: 3 }</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">original</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">b</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF"> };</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">copy</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { ...</span><span style="color: #E06C75">original</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">c</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF"> }; </span><span style="color: #7F848E; font-style: italic">// copy =&gt; { a: 1, b: 2, c: 3 }</span></span>
<span class=line></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">a</span><span style="color: #ABB2BF">, ...</span><span style="color: #E5C07B">noA</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">copy</span><span style="color: #ABB2BF">; </span><span style="color: #7F848E; font-style: italic">// noA =&gt; { b: 2, c: 3 }</span></span></code></pre>
</code></pre></li></ul><h2 id=array-数组>Array 数组</h2><ul><li><p>4.1 使用字面语法来创建数组对象。详见eslint: <a href=http://eslint.org/docs/rules/no-array-constructor.html><code>no-array-constructor</code></a></p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">items</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Array</span><span style="color: #ABB2BF">();</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">items</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [];</span></span></code></pre>
</code></pre></li><li><p>4.2 使用<code>push()</code>方法来添加元素而不是直接赋值。</p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">someStack</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [];</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #E06C75">someStack</span><span style="color: #ABB2BF">[</span><span style="color: #E5C07B">someStack</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">length</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;abracadabra&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #E5C07B">someStack</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">push</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;abracadabra&#39;</span><span style="color: #ABB2BF">);</span></span></code></pre>
</code></pre></li><li><p>4.3 使用<code>...</code>操作符来复制数组。</p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">len</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">items</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">length</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">itemsCopy</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [];</span></span>
<span class=line><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #C678DD">for</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">; </span><span style="color: #E06C75">i</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&lt;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">len</span><span style="color: #ABB2BF">; </span><span style="color: #E06C75">i</span><span style="color: #56B6C2">++</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">itemsCopy</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">items</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">];</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">itemsCopy</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [...</span><span style="color: #E06C75">items</span><span style="color: #ABB2BF">];</span></span></code></pre>
</code></pre></li><li><p>4.4 使用<code>Array.from()</code>来把一个类数组转化成数组。</p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">foo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">document</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">querySelectorAll</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;.foo&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">nodes</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Array</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">from</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">foo</span><span style="color: #ABB2BF">);</span></span></code></pre>
</code></pre></li><li><p>4.5 数组方法的回调函数里使用return声明。除非像8.2那样函数内只有一句表达的时候可以删去return，详见 <a href=http://eslint.org/docs/rules/array-callback-return><code>array-callback-return</code></a></p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #ABB2BF">[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">map</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">x</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">y</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">x</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">x</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">y</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">});</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #ABB2BF">[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">map</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">x</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">x</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">);</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">flat</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {};</span></span>
<span class=line><span style="color: #ABB2BF">[[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">], [</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">], [</span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">]].</span><span style="color: #61AFEF">reduce</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">memo</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">item</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">index</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">flatten</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">memo</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">concat</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">item</span><span style="color: #ABB2BF">);</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">flat</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">index</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">flatten</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">});</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">flat</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {};</span></span>
<span class=line><span style="color: #ABB2BF">[[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">], [</span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">], [</span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">]].</span><span style="color: #61AFEF">reduce</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">memo</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">item</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">index</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">flatten</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">memo</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">concat</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">item</span><span style="color: #ABB2BF">);</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">flat</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">index</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">flatten</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">flatten</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">});</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #E5C07B">inbox</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">filter</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">msg</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">subject</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">author</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">msg</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">subject</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;Mockingbird&#39;</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">author</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;Harper Lee&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  } </span><span style="color: #C678DD">else</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  }</span></span>
<span class=line><span style="color: #ABB2BF">});</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #E5C07B">inbox</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">filter</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">msg</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">subject</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">author</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">msg</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">subject</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;Mockingbird&#39;</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">author</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;Harper Lee&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  }</span></span>
<span class=line></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">});</span></span></code></pre>
</code></pre></li></ul><h2 id=destructuring-去构造化>Destructuring 去构造化</h2><ul><li><p>5.1 在获取和使用多种对象的属性的时候，尽量对对象去构造化。详见jscs: <a href=http://jscs.info/rule/requireObjectDestructuring><code>requireObjectDestructuring</code></a></p><blockquote><p>为什么？这样可以免于为这些属性设置很多临时的引用变量。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">getFullName</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">user</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">firstName</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">user</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">firstName</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">lastName</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">user</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">lastName</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">`</span><span style="color: #C678DD">${</span><span style="color: #E06C75">firstName</span><span style="color: #C678DD">}</span><span style="color: #98C379"> </span><span style="color: #C678DD">${</span><span style="color: #E06C75">lastName</span><span style="color: #C678DD">}</span><span style="color: #98C379">`</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">getFullName</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">user</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">firstName</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">lastName</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">user</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">`</span><span style="color: #C678DD">${</span><span style="color: #E06C75">firstName</span><span style="color: #C678DD">}</span><span style="color: #98C379"> </span><span style="color: #C678DD">${</span><span style="color: #E06C75">lastName</span><span style="color: #C678DD">}</span><span style="color: #98C379">`</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// best</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">getFullName</span><span style="color: #ABB2BF">({ </span><span style="color: #E06C75; font-style: italic">firstName</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">lastName</span><span style="color: #ABB2BF"> }) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">`</span><span style="color: #C678DD">${</span><span style="color: #E06C75">firstName</span><span style="color: #C678DD">}</span><span style="color: #98C379"> </span><span style="color: #C678DD">${</span><span style="color: #E06C75">lastName</span><span style="color: #C678DD">}</span><span style="color: #98C379">`</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span></code></pre>
</code></pre></li><li><p>5.2 数组的去构造化。详见 jscs: <a href=http://jscs.info/rule/requireArrayDestructuring><code>requireArrayDestructuring</code></a></p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">arr</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">];</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">first</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">arr</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">];</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">second</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">arr</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">];</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> [</span><span style="color: #E5C07B">first</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">second</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">arr</span><span style="color: #ABB2BF">;</span></span></code></pre>
</code></pre></li><li><p>5.3 对多个返回值使用对象去构造化而不是数组去构造化。详见jscs: <a href=http://jscs.info/rule/disallowArrayDestructuringReturn><code>disallowArrayDestructuringReturn</code></a></p><blockquote><p>为什么？因为这样你可以随时添加新属性或者改变顺序而不会影响调用。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">processInput</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">input</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// then a miracle occurs</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> [</span><span style="color: #E06C75">left</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">right</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">top</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">bottom</span><span style="color: #ABB2BF">];</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// the caller needs to think about the order of return data</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> [</span><span style="color: #E5C07B">left</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">__</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">top</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">processInput</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF">);</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">processInput</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">input</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// then a miracle occurs</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">left</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">right</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">top</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">bottom</span><span style="color: #ABB2BF"> };</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// the caller selects only the data they need</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">left</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">top</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">processInput</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF">);</span></span></code></pre>
</code></pre></li></ul><h2 id=strings-字符串>Strings 字符串</h2><ul><li><p>6.1 对字符串使用<strong>单</strong>引号。详见eslint: <a href=http://eslint.org/docs/rules/quotes.html><code>quotes</code></a> jscs: <a href=http://jscs.info/rule/validateQuoteMarks><code>validateQuoteMarks</code></a></p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;Capt. Janeway&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad - template literals should contain interpolation or newlines</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">`Capt. Janeway`</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;Capt. Janeway&#39;</span><span style="color: #ABB2BF">;</span></span></code></pre>
</code></pre></li><li><p>6.2 超过100个字符的长字符串不要使用换行符或者字符串拼接。</p><blockquote><p>为什么？难以处理，并且不方便搜索。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">errorMessage</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;This is a super long error that was thrown because </span><span style="color: #56B6C2">\</span></span>
<span class=line><span style="color: #98C379">of Batman. When you stop to think about how Batman had anything to do </span><span style="color: #56B6C2">\</span></span>
<span class=line><span style="color: #98C379">with this, you would get nowhere </span><span style="color: #56B6C2">\</span></span>
<span class=line><span style="color: #98C379">fast.&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">errorMessage</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;This is a super long error that was thrown because &#39;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #98C379">&#39;of Batman. When you stop to think about how Batman had anything to do &#39;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #98C379">&#39;with this, you would get nowhere fast.&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">errorMessage</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;This is a super long error that was thrown because of Batman. When you stop to think about how Batman had anything to do with this, you would get nowhere fast.&#39;</span><span style="color: #ABB2BF">;</span></span></code></pre>
</code></pre></li><li><p>6.3 包含动态内容的字符串使用模版字符串而不是字符串拼接。详见eslint: <a href=http://eslint.org/docs/rules/prefer-template.html><code>prefer-template</code></a> <a href=http://eslint.org/docs/rules/template-curly-spacing><code>template-curly-spacing</code></a> jscs: <a href=http://jscs.info/rule/requireTemplateStrings><code>requireTemplateStrings</code></a></p><blockquote><p>为什么？因为代码更简洁，可读性更好。方便合适的换行和字符串插入。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">sayHi</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">name</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;How are you, &#39;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;?&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">sayHi</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">name</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> [</span><span style="color: #98C379">&#39;How are you, &#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;?&#39;</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">join</span><span style="color: #ABB2BF">();</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">sayHi</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">name</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">`How are you, </span><span style="color: #C678DD">${</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #98C379">?`</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">sayHi</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">name</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">`How are you, </span><span style="color: #C678DD">${</span><span style="color: #E06C75">name</span><span style="color: #C678DD">}</span><span style="color: #98C379">?`</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span></code></pre>
</code></pre></li><li><p>6.4 在字符串中永远不要使用<code>eval()</code>，很容易出现bug。</p></li><li><p>6.5 没有必要的时候不要使用转义符。详见eslint: <a href=http://eslint.org/docs/rules/no-useless-escape><code>no-useless-escape</code></a></p><blockquote><p>为什么？因为反斜线大大影响代码阅读。除非必要不然不要使用。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">foo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;</span><span style="color: #56B6C2">\&#39;</span><span style="color: #98C379">this</span><span style="color: #56B6C2">\&#39;</span><span style="color: #98C379"> </span><span style="color: #56B6C2">\i\s</span><span style="color: #98C379"> </span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">quoted</span><span style="color: #56B6C2">\&quot;</span><span style="color: #98C379">&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">foo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;</span><span style="color: #56B6C2">\&#39;</span><span style="color: #98C379">this</span><span style="color: #56B6C2">\&#39;</span><span style="color: #98C379"> is &quot;quoted&quot;&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">foo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">`&#39;this&#39; is &quot;quoted&quot;`</span><span style="color: #ABB2BF">;</span></span></code></pre>
</code></pre></li></ul><h2 id=functions-函数>Functions 函数</h2><ul><li><p>7.1 使用命名的函数表达式，而不是直接声明函数。详见eslint: <a href=http://eslint.org/docs/rules/func-style><code>func-style</code></a> jscs: <a href=http://jscs.info/rule/requireFunctionDeclarations><code>requireFunctionDeclarations</code></a></p><blockquote><p>为什么？因为函数声明会被提升到顶部，也就意味着很轻易就会出现函数在文件中被定义之前就被引用了。这影响了代码的可读性和维护性。如果你发现一个函数的定义已经大到或者复杂到影响对其他代码的理解，那么你最好把它抽出来到一个单独的模组。不要忘记命名函数，匿名函数通常在出现问题的时候很难去定位。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">foo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> () {</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">foo</span><span style="color: #ABB2BF">() {</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">foo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">bar</span><span style="color: #ABB2BF">() {</span></span>
<span class=line><span style="color: #ABB2BF">};</span></span></code></pre>
</code></pre></li><li><p>7.2 立即调用的函数（IIFE）记得用括号包起来。详见eslint: <a href=http://eslint.org/docs/rules/wrap-iife.html><code>wrap-iife</code></a> jscs: <a href=http://jscs.info/rule/requireParenthesesAroundIIFE><code>requireParenthesesAroundIIFE</code></a></p><blockquote><p>为什么？一个立即调用的函数是一个单独的整体。记得要用括号包起来整个内容。包括调用函数的一对括号。注意在现在这样一个到处都是模组的世界，基本上你不会需要用到这样的函数。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// immediately-invoked function expression (IIFE)</span></span>
<span class=line><span style="color: #ABB2BF">(</span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> () {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;Welcome to the Internet. Please follow me.&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class=line><span style="color: #ABB2BF">}());</span></span></code></pre>
</code></pre></li><li><p>7.3 不要在非函数的代码块（比如if，while等）里直接声明函数，把函数赋给一个变量。浏览器虽然允许你这样做，但在解析的时候经常会有差别。详见eslint: <a href=http://eslint.org/docs/rules/no-loop-func.html><code>no-loop-func</code></a></p></li><li><p>7.4 注意：ECMA-262把块（<code>block</code>）定义为一系列语句（<code>statement</code>）。而函数声明（`function declaration并不算语句。详见 <a href="http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf#page=97">Read ECMA-262&#39;s note on this issue</a>.</p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">currentUser</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">test</span><span style="color: #ABB2BF">() {</span></span>
<span class=line><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;Nope.&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class=line><span style="color: #ABB2BF">  }</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">currentUser</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">test</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class=line><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;Yup.&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class=line><span style="color: #ABB2BF">  };</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span></code></pre>
</code></pre></li><li><p>7.5 不要把一个参数命名为<code>arguments</code>。这样在整个函数作用域里会判定为参数名而影响<code>arguments</code>对象的使用。</p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">nope</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">name</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">options</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">arguments</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// ...stuff...</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">yup</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">name</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">options</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">args</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// ...stuff...</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span></code></pre>
</code></pre></li><li><p>7.6 不要直接使用<code>arguments</code>，使用剩余参数的语法<code>…</code>。详见eslint: <a href=http://eslint.org/docs/rules/prefer-rest-params><code>prefer-rest-params</code></a></p><blockquote><p>为什么？因为对于你想要处理的参数使用<code>...</code>是非常明确的，而且剩余参数是一个真实的数组，而不像arguments对象是一个类数组。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">concatenateAll</span><span style="color: #ABB2BF">() {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">args</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Array</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">prototype</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">slice</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">call</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">arguments</span><span style="color: #ABB2BF">);</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">args</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">join</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">concatenateAll</span><span style="color: #ABB2BF">(...</span><span style="color: #E06C75; font-style: italic">args</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">args</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">join</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span></code></pre>
</code></pre></li><li><p>7.7 使用默认的参数语法，而不是转化成函数的<code>arguments</code></p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// really bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handleThings</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">opts</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// No! We shouldn&#39;t mutate function arguments.</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// Double bad: if opts is falsy it&#39;ll be set to an object which may</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// be what you want but it can introduce subtle bugs.</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E06C75">opts</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">opts</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">||</span><span style="color: #ABB2BF"> {};</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// ...</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// still bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handleThings</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">opts</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">opts</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">void</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">    </span><span style="color: #E06C75">opts</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {};</span></span>
<span class=line><span style="color: #ABB2BF">  }</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// ...</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handleThings</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">opts</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {}) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// ...</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span></code></pre>
</code></pre></li><li><p>7.8 避免默认参数的副作用。关于<a href=https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Default_parameters>默认参数</a>。</p><blockquote><p>为什么？因为容易引起理解问题。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #C678DD">var</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">b</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">count</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">a</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">b</span><span style="color: #56B6C2">++</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">);</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line><span style="color: #61AFEF">count</span><span style="color: #ABB2BF">();  </span><span style="color: #7F848E; font-style: italic">// 1</span></span>
<span class=line><span style="color: #61AFEF">count</span><span style="color: #ABB2BF">();  </span><span style="color: #7F848E; font-style: italic">// 2</span></span>
<span class=line><span style="color: #61AFEF">count</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">); </span><span style="color: #7F848E; font-style: italic">// 3</span></span>
<span class=line><span style="color: #61AFEF">count</span><span style="color: #ABB2BF">();  </span><span style="color: #7F848E; font-style: italic">// 3</span></span></code></pre>
</code></pre></li><li><p>7.9 永远把默认参数值放在最后。</p><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handleThings</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">opts</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {}, </span><span style="color: #E06C75; font-style: italic">name</span><span style="color: #ABB2BF">) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// ...</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">handleThings</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">name</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">opts</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {}) {</span></span>
<span class=line><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// ...</span></span>
<span class=line><span style="color: #ABB2BF">}</span></span></code></pre>
</code></pre></li><li><p>7.10 永远不要使用函数构造器来创建一个新函数。详见eslint: <a href=http://eslint.org/docs/rules/no-new-func><code>no-new-func</code></a>。</p><blockquote><p>为什么？因为这样会类似<code>eval()</code>来处理字符串。容易引起错误。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">var</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">add</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Function</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;a&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;b&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;return a + b&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// still bad</span></span>
<span class=line><span style="color: #C678DD">var</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">subtract</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Function</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;a&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;b&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;return a - b&#39;</span><span style="color: #ABB2BF">);</span></span></code></pre>
</code></pre></li><li><p>7.11 函数签名的空格问题。详见eslint: <a href=http://eslint.org/docs/rules/space-before-function-paren><code>space-before-function-paren</code></a> <a href=http://eslint.org/docs/rules/space-before-blocks><code>space-before-blocks</code></a></p><blockquote><p>保持一致性总是好的。而且在删除或添加函数名的时候你也不需要添加或删除空格。</p></blockquote><pre><code class=language-javascript><pre class=shiki style="background-color: #282c34"><code><span class=line><span style="color: #7F848E; font-style: italic">// bad</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">f</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF">(){};</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">g</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> (){};</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">h</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF">() {};</span></span>
<span class=line></span>
<span class=line><span style="color: #7F848E; font-style: italic">// good</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">x</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> () {};</span></span>
<span class=line><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">y</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">a</span><span style="color: #ABB2BF">() {};</span></span></code></pre>
</code></pre></li></ul></div><div class=footer><hr><div class=footer-link><a href=/archive aria-label="Read more about all archives"><i class="fa fa-archive" aria-hidden=true></i> </a><a target=_blank href=https://twitter.com/chow_won aria-label="Read more on twitter"><i class="fa fa-twitter" aria-hidden=true></i></a> <a target=_blank href=https://github.com/zoubingwu aria-label="Read more on github"><i class="fa fa-github" aria-hidden=true></i> </a><a target=_blank href=mailto:zoubingwu@gmail.com aria-label=Email><i class="fa fa-envelope" aria-hidden=true></i></a></div>© 2016-2023 zoubingwu. All rights reserved.</div></main></body></html>